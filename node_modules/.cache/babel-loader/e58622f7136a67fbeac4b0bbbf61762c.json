{"ast":null,"code":"import _slicedToArray from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from\"react\";import{Route,useHistory}from\"react-router-dom\";import{Account,List,Post,Nav,NewPost,Profile,Message,Inbox,ViewUserPosts}from\"./\";import{callApi}from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var fetchUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var _yield$callApi,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callApi({url:\"/users/me\",token:token});case 2:_yield$callApi=_context.sent;data=_yield$callApi.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchUserData(_x){return _ref.apply(this,arguments);};}();var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$callApi2,posts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return callApi({url:\"/posts\"});case 2:_yield$callApi2=_context2.sent;posts=_yield$callApi2.data.posts;return _context2.abrupt(\"return\",posts);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();var App=function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];//   console.log(\"token\", token);\nuseEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var posts,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(true);_context3.next=3;return fetchPosts();case 3:posts=_context3.sent;if(posts){setLoading(false);setPosts(posts);}if(token){_context3.next=9;break;}setToken(localStorage.getItem(\"token\"));setLoading(false);return _context3.abrupt(\"return\");case 9:_context3.next=11;return fetchUserData(token);case 11:data=_context3.sent;if(data&&data.username){setLoading(false);setUserData(data);}case 13:case\"end\":return _context3.stop();}}},_callee3);})),[token]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav,{userData:userData,setUserData:setUserData,setToken:setToken}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"title-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-side\",children:/*#__PURE__*/_jsx(\"img\",{className:\"home-img\",src:\"https://images.unsplash.com/photo-1472851294608-062f824d29cc?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=100\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-side\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Where Stranger Is Better\"})})]})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",children:/*#__PURE__*/_jsx(Account,{action:\"login\",setToken:setToken,setUserData:setUserData})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",children:/*#__PURE__*/_jsx(Account,{action:\"register\",setToken:setToken,setUserData:setUserData})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts\",children:/*#__PURE__*/_jsx(List,{posts:posts,loading:loading})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postId\",children:/*#__PURE__*/_jsx(Post,{posts:posts,setPosts:setPosts,token:token,userData:userData})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postId/messages\",children:/*#__PURE__*/_jsx(Message,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",children:/*#__PURE__*/_jsx(Profile,{userData:userData,posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard/messages\",children:/*#__PURE__*/_jsx(Inbox,{userData:userData,posts:posts})}),/*#__PURE__*/_jsx(Route,{path:\"/newPost\",children:/*#__PURE__*/_jsx(NewPost,{posts:posts,setPosts:setPosts,token:token})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/dashboard/myposts\",children:/*#__PURE__*/_jsx(ViewUserPosts,{userData:userData})})]});};export default App;","map":{"version":3,"sources":["/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/src/components/App.js"],"names":["React","useState","useEffect","Route","useHistory","Account","List","Post","Nav","NewPost","Profile","Message","Inbox","ViewUserPosts","callApi","fetchUserData","token","url","data","fetchPosts","posts","App","setToken","userData","setUserData","setPosts","loading","setLoading","localStorage","getItem","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport {\n  Account,\n  List,\n  Post,\n  Nav,\n  NewPost,\n  Profile,\n  Message,\n  Inbox,\n  ViewUserPosts,\n} from \"./\";\nimport { callApi } from \"../api\";\n\nconst fetchUserData = async (token) => {\n  const { data } = await callApi({\n    url: \"/users/me\",\n    token,\n  });\n  return data;\n};\n\nconst fetchPosts = async () => {\n  const {\n    data: { posts },\n  } = await callApi({\n    url: \"/posts\",\n  });\n  return posts;\n};\n\nconst App = () => {\n  const [token, setToken] = useState(\"\");\n  const [userData, setUserData] = useState({});\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading]= useState(false)\n//   console.log(\"token\", token);\n\n  useEffect(async () => {\n    setLoading(true);\n\n    const posts = await fetchPosts();\n    if (posts){ \n      setLoading(false);\n\n      setPosts(posts);\n    }\n    if (!token) {\n      setToken(localStorage.getItem(\"token\"));\n      setLoading(false);\n\n      return;\n    }\n    const data = await fetchUserData(token);\n\n    if (data && data.username) {\n            setLoading(false);\n\n      setUserData(data);\n    }}, [token]);\n\n\n  return (\n    <>\n      <Nav userData={userData} setUserData={setUserData} setToken={setToken} />\n\n      <Route exact path=\"/\">\n          <div className=\"title-page\">\n            <div className='left-side'>\n            <img className='home-img' src='https://images.unsplash.com/photo-1472851294608-062f824d29cc?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=100'/>\n            </div>\n            <div className='right-side'>\n            <h2>Where Stranger Is Better</h2>\n        \n              </div>\n          </div>\n       \n      </Route>\n      <Route path=\"/login\">\n        <Account action=\"login\" setToken={setToken} setUserData={setUserData} />\n      </Route>\n      <Route path=\"/register\">\n        <Account\n          action=\"register\"\n          setToken={setToken}\n          setUserData={setUserData}\n        />\n      </Route>\n      <Route exact path=\"/posts\">\n        <List posts={posts} \n        loading= {loading}\n        />\n      </Route>\n      <Route path=\"/posts/:postId\">\n        <Post\n          posts={posts}\n          setPosts={setPosts}\n          token={token}\n          userData={userData}\n        />\n      </Route>\n      <Route path=\"/posts/:postId/messages\">\n        <Message token={token}></Message>\n      </Route>\n      <Route path=\"/dashboard\">\n        <Profile \n        userData={userData} \n        posts={posts} \n        token={token} /> \n      </Route>\n      <Route path=\"/dashboard/messages\">\n     <Inbox \n        userData={userData} \n        posts={posts} /> \n      </Route>\n      <Route path=\"/newPost\">\n        <NewPost \n        posts={posts} \n        setPosts={setPosts} \n        token={token} />\n      </Route>\n      <Route exact path=\"/dashboard/myposts\">\n        <ViewUserPosts \n        userData={userData} />\n      </Route>\n    </>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}