{"ast":null,"code":"import _regeneratorRuntime from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{callApi}from'../api';import{useHistory,useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(_ref){var posts=_ref.posts,setPosts=_ref.setPosts,token=_ref.token,userData=_ref.userData;var history=useHistory();var _useParams=useParams(),postId=_useParams.postId;var post=posts.find(function(post){return postId===post._id;});var postAuthor=post.author._id;var userId=userData._id;var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$callApi,success;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callApi({url:\"/posts/\".concat(post._id),token:token,method:'DELETE'});case 2:_yield$callApi=_context.sent;success=_yield$callApi.success;if(success){alert('Post Deleted!');history.push('/dashboard');setPosts(_toConsumableArray(posts));}case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();if(!post){return/*#__PURE__*/_jsx(\"div\",{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"single-post\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\" \",post.title,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" Posted by: \",post.author.username]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" Location: \",post.location]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" Description: \",post.description]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Price : $\",post.price]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Delivers: \",post.willDeliver?'Yes':'No']}),userId===postAuthor&&postAuthor?/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete\"}):null,userId!==postAuthor?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.push(\"/posts/\".concat(postId,\"/messages\"));},children:\" Reply\"}):null]});};export default Post;","map":{"version":3,"sources":["/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/src/components/Post.js"],"names":["React","callApi","useHistory","useParams","Post","posts","setPosts","token","userData","history","postId","post","find","_id","postAuthor","author","userId","handleDelete","url","method","success","alert","push","title","username","location","description","price","willDeliver"],"mappings":"uiBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,QAAxB,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,kBAAtC,C,wFAKA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAwC,IAAtCC,CAAAA,KAAsC,MAAtCA,KAAsC,CAA/BC,QAA+B,MAA/BA,QAA+B,CAArBC,KAAqB,MAArBA,KAAqB,CAAdC,QAAc,MAAdA,QAAc,CACrD,GAAMC,CAAAA,OAAO,CAAEP,UAAU,EAAzB,CADqD,eAEpCC,SAAS,EAF2B,CAE9CO,MAF8C,YAE9CA,MAF8C,CAGrD,GAAMC,CAAAA,IAAI,CAAGN,KAAK,CAACO,IAAN,CAAW,SAACD,IAAD,QAAUD,CAAAA,MAAM,GAAKC,IAAI,CAACE,GAA1B,EAAX,CAAb,CACA,GAAMC,CAAAA,UAAU,CAAGH,IAAI,CAACI,MAAL,CAAYF,GAA/B,CACA,GAAMG,CAAAA,MAAM,CAAER,QAAQ,CAACK,GAAvB,CAGA,GAAMI,CAAAA,YAAY,2FAAG,oLACOhB,CAAAA,OAAO,CAAE,CAC7BiB,GAAG,kBAAYP,IAAI,CAACE,GAAjB,CAD0B,CAE7BN,KAAK,CAAEA,KAFsB,CAG7BY,MAAM,CAAC,QAHsB,CAAF,CADd,qCACVC,OADU,gBACVA,OADU,CAMjB,GAAGA,OAAH,CAAW,CACPC,KAAK,CAAC,eAAD,CAAL,CACAZ,OAAO,CAACa,IAAR,CAAa,YAAb,EACAhB,QAAQ,oBAAKD,KAAL,EAAR,CAEH,CAXgB,sDAAH,kBAAZY,CAAAA,YAAY,2CAAlB,CAeE,GAAI,CAACN,IAAL,CAAU,CACN,mBAAO,cAAP,CACH,CAAC,mBACI,aAAK,SAAS,CAAC,aAAf,wBACK,0BAAMA,IAAI,CAACY,KAAX,OADL,cAEK,sCAAmBZ,IAAI,CAACI,MAAL,CAAYS,QAA/B,GAFL,cAGK,qCAAkBb,IAAI,CAACc,QAAvB,GAHL,cAIK,wCAAqBd,IAAI,CAACe,WAA1B,GAJL,cAKK,mCAAef,IAAI,CAACgB,KAApB,GALL,cAMK,oCAAiBhB,IAAI,CAACiB,WAAL,CAAmB,KAAnB,CAA2B,IAA5C,GANL,CAOMZ,MAAM,GAAKF,UAAX,EAAyBA,UAAzB,cACD,eAAQ,OAAO,CAAGG,YAAlB,oBADC,CAEC,IATP,CAWMD,MAAM,GAAKF,UAAX,cACF,eACA,OAAO,CAAG,kBAAK,CACfL,OAAO,CAACa,IAAR,kBAAuBZ,MAAvB,eACC,CAHD,oBADE,CAIqB,IAf3B,GADJ,CAsBH,CA/CD,CAiDA,cAAeN,CAAAA,IAAf","sourcesContent":["import React from 'react';\nimport { callApi } from '../api';\nimport { useHistory, useParams } from 'react-router-dom';\n\n\n\n\nconst Post = ({posts, setPosts, token, userData}) => {\nconst history= useHistory()\nconst {postId} = useParams();\nconst post = posts.find((post) => postId === post._id);\nconst postAuthor = post.author._id;\nconst userId= userData._id\n\n\nconst handleDelete = async ()=>{\n    const {success} = await callApi ({\n        url: `/posts/${post._id}`,\n        token: token,\n        method:'DELETE'\n    });\n    if(success){\n        alert('Post Deleted!')\n        history.push('/dashboard')\n        setPosts([...posts])\n\n    }\n\n}\n\n  if (!post){\n      return <div></div>\n  } return (\n        <div className='single-post'>\n             <h5> {post.title} </h5>\n             <div> Posted by: { post.author.username }</div>\n             <div> Location: { post.location }</div>\n             <div> Description: { post.description }</div>\n             <div>Price : ${post.price}</div>\n             <div>Delivers: { post.willDeliver ? 'Yes' : 'No' }</div>\n             {userId === postAuthor && postAuthor? (\n             <button onClick= {handleDelete}>Delete</button>)\n             : null\n             }\n             {userId !== postAuthor ? (\n            <button\n            onClick= {() =>{\n            history.push(`/posts/${postId}/messages`)\n            }} > Reply</button>) : null\n            }\n        </div>\n    )\n\n\n}\n\nexport default Post"]},"metadata":{},"sourceType":"module"}