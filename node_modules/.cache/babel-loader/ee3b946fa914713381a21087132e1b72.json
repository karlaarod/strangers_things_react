{"ast":null,"code":"import _regeneratorRuntime from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link,useHistory}from'react-router-dom';import{callApi}from'../api';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Account=function Account(_ref){var action=_ref.action,setToken=_ref.setToken,setUserData=_ref.setUserData;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var isLogin=action==='login';var title=isLogin?'Login':'Create Account';var oppositeTitle=isLogin?'Create Account':'Login';var oppositeAction=isLogin?'register':'login';var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _data$data;var data,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return callApi({url:\"/users/\".concat(action),body:{user:{username:username,password:password}},method:'POST'});case 3:data=_context.sent;token=data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.token;if(token){localStorage.setItem('token',token);setUsername('');setPassword('');setToken(token);history.push('/dashboard');}case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"account-form\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",title,\" \"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,onChange:function onChange(event){return setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Re-enter Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",children:[\" \",title,\" \"]})]}),/*#__PURE__*/_jsxs(Link,{to:\"/\".concat(oppositeAction),children:[\" \",oppositeTitle,\" \"]})]});};export default Account;","map":{"version":3,"sources":["/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/src/components/Account.js"],"names":["React","useState","Link","useHistory","callApi","Account","action","setToken","setUserData","username","setUsername","password","setPassword","isLogin","title","oppositeTitle","oppositeAction","history","handleSubmit","event","preventDefault","url","body","user","method","data","token","localStorage","setItem","push","target","value"],"mappings":"+hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,OAAT,KAAwB,QAAxB,C,wFAGA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAuC,IAApCC,CAAAA,MAAoC,MAApCA,MAAoC,CAA5BC,QAA4B,MAA5BA,QAA4B,CAAlBC,WAAkB,MAAlBA,WAAkB,eACnBP,QAAQ,CAAC,EAAD,CADW,wCAC5CQ,QAD4C,eAClCC,WADkC,8BAEnBT,QAAQ,CAAC,EAAD,CAFW,yCAE5CU,QAF4C,eAElCC,WAFkC,eAGnD,GAAMC,CAAAA,OAAO,CAAEP,MAAM,GAAK,OAA1B,CACA,GAAMQ,CAAAA,KAAK,CAAGD,OAAO,CAAG,OAAH,CAAa,gBAAlC,CACA,GAAME,CAAAA,aAAa,CAAGF,OAAO,CAAG,gBAAH,CAAsB,OAAnD,CACA,GAAMG,CAAAA,cAAc,CAAGH,OAAO,CAAG,UAAH,CAAgB,OAA9C,CACA,GAAMI,CAAAA,OAAO,CAAEd,UAAU,EAAzB,CAEA,GAAMe,CAAAA,YAAY,2FAAG,iBAAOC,KAAP,gJACjBA,KAAK,CAACC,cAAN,GADiB,sBAEEhB,CAAAA,OAAO,CAAC,CACvBiB,GAAG,kBAAYf,MAAZ,CADoB,CAEvBgB,IAAI,CAAE,CAAEC,IAAI,CAAE,CAAEd,QAAQ,CAARA,QAAF,CAAYE,QAAQ,CAARA,QAAZ,CAAR,CAFiB,CAGvBa,MAAM,CAAE,MAHe,CAAD,CAFT,QAEXC,IAFW,eAOXC,KAPW,CAOHD,IAPG,SAOHA,IAPG,6BAOHA,IAAI,CAAEA,IAPH,qCAOH,WAAYC,KAPT,CASjB,GAAIA,KAAJ,CAAW,CACPC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACAhB,WAAW,CAAC,EAAD,CAAX,CACAE,WAAW,CAAC,EAAD,CAAX,CACAL,QAAQ,CAACmB,KAAD,CAAR,CACAT,OAAO,CAACY,IAAR,CAAa,YAAb,EACH,CAfgB,sDAAH,kBAAZX,CAAAA,YAAY,6CAAlB,CAkBA,mBACI,aAAK,SAAS,CAAE,cAAhB,wBACA,0BAAMJ,KAAN,OADA,cAEI,cAAM,QAAQ,CAAGI,YAAjB,wBACI,oCADJ,cAEI,cACA,IAAI,CAAC,MADL,CAEA,QAAQ,KAFR,CAGA,QAAQ,CAAI,kBAACC,KAAD,QACRT,CAAAA,WAAW,CAACS,KAAK,CAACW,MAAN,CAAaC,KAAd,CADH,EAHZ,EAFJ,cAQI,oCARJ,cASI,cACA,IAAI,CAAC,UADL,CAEA,QAAQ,KAFR,CAGA,QAAQ,CAAI,kBAACZ,KAAD,QACRP,CAAAA,WAAW,CAACO,KAAK,CAACW,MAAN,CAAaC,KAAd,CADH,EAHZ,EATJ,cAeM,6CAfN,cAgBI,cAAO,IAAI,CAAC,UAAZ,CAAuB,QAAQ,KAA/B,CACA,QAAQ,CAAI,kBAACZ,KAAD,QACRP,CAAAA,WAAW,CAACO,KAAK,CAACW,MAAN,CAAaC,KAAd,CADH,EADZ,EAhBJ,cAoBI,gBAAQ,IAAI,CAAC,QAAb,eAAwBjB,KAAxB,OApBJ,GAFJ,cAyBI,MAAC,IAAD,EAAM,EAAE,YAAOE,cAAP,CAAR,eAAmCD,aAAnC,OAzBJ,GADJ,CA6BF,CAxDF,CAyDA,cAAeV,CAAAA,OAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { callApi } from '../api'\n\n\nconst Account = ({ action, setToken, setUserData }) => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const isLogin= action === 'login';\n    const title = isLogin ? 'Login' : 'Create Account';\n    const oppositeTitle = isLogin ? 'Create Account' : 'Login';\n    const oppositeAction = isLogin ? 'register' : 'login';\n    const history= useHistory ();\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        const data = await callApi({\n            url: `/users/${action}`,\n            body: { user: { username, password } },\n            method: 'POST',\n        });\n        const token = data?.data?.token;\n\n        if (token) {\n            localStorage.setItem('token', token);\n            setUsername('');\n            setPassword('');\n            setToken(token);\n            history.push('/dashboard');\n        }\n    };\n\n    return (\n        <div className= 'account-form'>\n        <h1> {title} </h1>\n            <form onSubmit= {handleSubmit}>\n                <label>Username:</label>\n                <input \n                type='text' \n                required\n                onChange = {(event) => \n                    setUsername(event.target.value)\n                }></input>\n                <label>Password:</label>\n                <input \n                type='password' \n                required\n                onChange = {(event) => \n                    setPassword(event.target.value)\n                }></input>\n                  <label>Re-enter Password:</label>\n                <input type='password' required\n                onChange = {(event) => \n                    setPassword(event.target.value)\n                 } ></input>\n                <button type='submit'> {title} </button> \n                </form>\n\n            <Link to= {`/${oppositeAction}`}> {oppositeTitle} </Link>\n        </div>\n    );\n }\nexport default Account;"]},"metadata":{},"sourceType":"module"}