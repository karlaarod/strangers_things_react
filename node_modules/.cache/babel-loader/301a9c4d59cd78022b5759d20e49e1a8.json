{"ast":null,"code":"import _regeneratorRuntime from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory,useParams}from'react-router-dom';import{callApi}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Message=function Message(_ref){var token=_ref.token;var _useParams=useParams(),postId=_useParams.postId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var history=useHistory();console.log('postid',postId);console.log('token is',token);var handleSumbit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data,messageSuccess;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return callApi({url:\"/posts/\".concat(postId,\"/messages\"),method:'POST',token:token,body:{message:{content:content}}});case 3:data=_context.sent;console.log('data:',data);messageSuccess=data===null||data===void 0?void 0:data.success;if(messageSuccess){alert('Message Sent!');history.push('/dashboard/');}console.log(data);case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSumbit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"message-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Reply to Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSumbit,children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"message-form-textarea\",placeholder:\"type a message\",rows:\"10\",cols:\"40\",maxLength:\"150\",required:true,value:content,onChange:function onChange(event){setContent(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:\"Send\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.push(\"/posts/\".concat(postId));},children:\"Cancel\"})]})]});};export default Message;","map":{"version":3,"sources":["/Users/karlarodriguez/Desktop/course_work/strangers_thing_react/src/components/Message.js"],"names":["React","useState","useHistory","useParams","callApi","Message","token","postId","content","setContent","history","console","log","handleSumbit","event","preventDefault","url","method","body","message","data","messageSuccess","success","alert","push","target","value"],"mappings":"+hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,kBAAtC,CACA,OAASC,OAAT,KAAwB,QAAxB,C,wFAIA,GAAMC,CAAAA,OAAO,CAAE,QAATA,CAAAA,OAAS,MAAY,IAAVC,CAAAA,KAAU,MAAVA,KAAU,gBACNH,SAAS,EADH,CAChBI,MADgB,YAChBA,MADgB,eAEON,QAAQ,CAAE,EAAF,CAFf,wCAEhBO,OAFgB,eAEPC,UAFO,eAGvB,GAAMC,CAAAA,OAAO,CAAER,UAAU,EAAzB,CAEJS,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBL,MAAtB,EACAI,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAuBN,KAAvB,EAEA,GAAMO,CAAAA,YAAY,2FAAE,iBAAMC,KAAN,0IAChBA,KAAK,CAACC,cAAN,GADgB,sBAGGX,CAAAA,OAAO,CAAE,CACxBY,GAAG,kBAAYT,MAAZ,aADqB,CAExBU,MAAM,CAAC,MAFiB,CAGxBX,KAAK,CAAEA,KAHiB,CAIxBY,IAAI,CAAE,CAAEC,OAAO,CAAE,CAACX,OAAO,CAAPA,OAAD,CAAX,CAJkB,CAAF,CAHV,QAGVY,IAHU,eAShBT,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBQ,IAApB,EAEMC,cAXU,CAWOD,IAXP,SAWOA,IAXP,iBAWOA,IAAI,CAAEE,OAXb,CAYhB,GAAID,cAAJ,CAAmB,CACfE,KAAK,CAAC,eAAD,CAAL,CACAb,OAAO,CAACc,IAAR,CAAa,aAAb,EACH,CAEDb,OAAO,CAACC,GAAR,CAAYQ,IAAZ,EAjBgB,sDAAF,kBAAZP,CAAAA,YAAY,6CAAlB,CAoBI,mBACI,aAAK,SAAS,CAAC,cAAf,wBACC,qCADD,cAEC,cAAM,QAAQ,CAAEA,YAAhB,wBACA,iBAAU,SAAS,CAAC,uBAApB,CAA4C,WAAW,CAAE,gBAAzD,CAA0E,IAAI,CAAC,IAA/E,CAAoF,IAAI,CAAC,IAAzF,CAA8F,SAAS,CAAC,KAAxG,CAA8G,QAAQ,KAAtH,CACA,KAAK,CAAEL,OADP,CAEA,QAAQ,CAAG,kBAACM,KAAD,CAAS,CAChBL,UAAU,CAACK,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAV,CACH,CAJD,EADA,cAOD,gCAPC,cAQD,eAAQ,OAAO,CAAG,kBAAI,CAClBhB,OAAO,CAACc,IAAR,kBAAuBjB,MAAvB,GACH,CAFD,oBARC,GAFD,GADJ,CAiBH,CA7CD,CA+CA,cAAeF,CAAAA,OAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { callApi } from '../api';\n\n\n\nconst Message= ({token}) =>{\n    const {postId} = useParams();\n    const [content, setContent] = useState ('');\n    const history= useHistory();\n\nconsole.log('postid', postId)\nconsole.log('token is',token)\n\nconst handleSumbit= async(event) =>{\n    event.preventDefault();\n\n    const data = await callApi ({\n        url: `/posts/${postId}/messages`,\n        method:'POST',\n        token: token,\n        body: { message: {content}}\n    })\n    console.log('data:',data)\n\n    const messageSuccess = data?.success;\n    if (messageSuccess){\n        alert('Message Sent!')\n        history.push('/dashboard/')\n    } \n\n    console.log(data)\n\n}\n    return(   \n        <div className='message-form'>\n         <h1>Reply to Post</h1>\n         <form onSubmit={handleSumbit}>\n         <textarea className='message-form-textarea' placeholder= 'type a message' rows=\"10\" cols=\"40\" maxLength=\"150\" required\n         value={content}\n         onChange= {(event)=>{\n             setContent(event.target.value)\n         }}\n        ></textarea>\n        <button>Send</button>\n        <button onClick= {()=>{\n            history.push(`/posts/${postId}`)\n        }} >Cancel</button>\n        </form>\n         </div>\n    )    \n}\n\nexport default Message"]},"metadata":{},"sourceType":"module"}